# Use Node.js 18 as the base image
FROM node:18-slim

# Install PostgreSQL client
RUN apt-get update && apt-get install -y libpq-dev

# Set the working directory
WORKDIR /app

# Copy package.json and install Node.js dependencies
COPY package.json ./
RUN npm install
RUN npm install -g nodemon

# Copy the API server script
COPY api-server.mjs ./

# Expose API port
EXPOSE 3000

# Set the entrypoint with live reload
CMD ["nodemon", "--watch", "/app", "api-server.mjs"] 